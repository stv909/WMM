<html>
	<head>
		<script src="eve.js"></script>
		<script src="base64.js"></script>
		<script src="chat.js"></script>
		<script src="settings.js"></script>
		<script src="q.js"></script>
		<script>
			window.onload = function() {
				var ChatClient = chat.ChatClient;
				
				var chatClient = new ChatClient(settings.chatUrl);
				
				chatClient.on('connect', function() {
					console.log('connect');	
				});
				chatClient.on('disconnect', function() {
					console.log('disconnect');
				});
				
				chatClient.connect();
				
				var connectElem = document.getElementById('connect');
				var checkStatusElem = document.getElementById('check-status');
				var nowStatusElem = document.getElementById('now-status');
				var closeElem = document.getElementById('close');
				
				connectElem.addEventListener('click', function() {
					chatClient.connect();	
				});
				checkStatusElem.addEventListener('click', function() {
					console.log(chatClient.readyState());	
				});
				closeElem.addEventListener('click', function() {
					chatClient.disconnect();
				});
			};
		</script>
	</head>
	<body>
		<button id="connect">Connect</button>
		<button id="check-status">Check status</button>
		<button id="now-status">Now status</button>
		<button id="close">Close</button>
	</body>
</html>